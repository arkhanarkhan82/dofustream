<!DOCTYPE html>
<html lang="en">
<head>
    <!-- SEO & METADATA -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLS Live Streams - StreamEast</title>
    <meta name="description" content="">
    
    <meta name="theme-color" content="">

    <!-- OPEN GRAPH & SOCIAL -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:site_name" content="">
    <meta property="og:title" content="MLS Live Streams - StreamEast">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta property="og:image:secure_url" content="">
    <meta property="og:image:type" content="">
    <meta property="og:image:alt" content=" Logo">

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="MLS Live Streams - StreamEast">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">
    
    <!-- ROBOTS -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    
    <!-- ASSETS -->
    <link rel="icon" href="">
    <link rel="canonical" href="">
    
    <!-- STATIC SCHEMAS -->
    
    
    <style>html { scroll-behavior: smooth; }</style>

    <style>
        :root {
            /* --- DYNAMIC THEME VARIABLES --- */
            --brand-primary: #d00000;
            --brand-dark: #8a0000;
            --status-green: #00e676;
            --accent-gold: #ffd700;
            --bg-body: #050505;
            --bg-panel: #0f0f0f;
            --bg-glass: ;
            --border: #222222;
            --text-main: #ffffff;
            --text-muted: #888888;
            
            --font-family-base: system-ui, -apple-system, sans-serif;
            --font-family-headings: 'Courier New', monospace;
            --base-font-size: ; 
            --base-line-height: ; 
            --container-max-width: 950; 
        --header-max-width: 1000;
            --border-radius-base: 0; 
            --button-border-radius: 21;
        --hero-pill-radius: 8;
            --card-shadow: ;
        /* FOOTER LEAGUE CARDS */
            --league-card-bg: #bb1b1b;
            --league-card-text: #e1dbdb;
            --league-card-border: ; /* This is now full string "1px solid #..." */
            --league-card-radius: 18;
            
            --league-card-hover-bg: #347ba8;
            --league-card-hover-text: #222020;
            --league-card-hover-border: ;
        --static-h1-color: #000000;
            --static-h1-border: ;
         --sys-status-display: ;

            /* HEADER */
            --header-bg: #050505;
            --header-text-color: #aaaaaa;
            --header-link-active-color: #ffffff;
        --header-link-hover-color: #3e0a0a;
        --header-highlight-color: #02ed12;
            --header-highlight-hover: #bf1d1d;
            --header-border-bottom: 1px solid var(--border);
            --logo-text-p1-color: #ffffff;
            --logo-text-p2-color: #d00000;
            --logo-image-size: ;
        /* ARTICLE STYLING */
            --article-bg: #0a0a0a;
            --article-text: #e5e0e0;
            --article-line-height: ;
            --article-bullet: #e907a1;
            --article-link: #df0c0c;
            --article-h2-color: #0400f0;
            --article-h2-border: ;
            --article-h3-color: #4ff906;
            --article-h4-color: #df2707;

            /* HERO */
            
            --hero-h1-color: #ffffff;
            --hero-intro-color: #999999;
            --hero-pill-bg: #111111;
            --hero-pill-text: #cccccc;
            --hero-pill-border: ;
            --hero-pill-hover-bg: #2a0a0a;
            --hero-pill-hover-text: #ffffff;
            --hero-pill-hover-border: ;

            /* MATCH ROWS */
            --match-row-bg: #121212;
            --match-row-border: #222222;
            --match-row-live-border-left: 3px solid var(--brand-primary);
            --match-row-live-bg-start: #1a0505;
            --match-row-live-bg-end: #141414;
            --match-row-hover-border: #444444;
            --match-row-hover-bg: #1a1a1a; /* New: Hover BG */
            --match-row-hover-transform: ;
            --match-row-time-main-color: #888888;
            --match-row-time-sub-color: ;
            --match-row-live-text-color: #d00000;
            --match-row-league-tag-color: ;
            --match-row-team-name-color: #ffffff;
            
            /* BUTTONS */
            --match-row-btn-watch-bg: #d00000;
            --match-row-btn-watch-text: #ffffff;
            --match-row-btn-watch-hover-bg: ;
            --match-row-btn-watch-hover-transform: ;
            --match-row-hd-badge-bg: ;
            --match-row-hd-badge-border: ;
            --match-row-hd-badge-text: ;
            
            --match-row-btn-notify-bg: ;
            --match-row-btn-notify-border: ;
            --match-row-btn-notify-text: ;
            --match-row-btn-notify-active-bg: ;
            --match-row-btn-notify-active-border: ;
            --match-row-btn-notify-active-text: ;
            
            --match-row-btn-copy-link-color: ;
            --match-row-btn-copy-link-hover-color: ;

            /* FOOTER */
        --footer-text-align: left;
            --footer-bg-start: #0e0e0e;
            --footer-bg-end: #050505;
            --footer-border-top: ;
            --footer-heading-color: ;
            --footer-link-color: #94a3b8;
            --footer-link-hover-color: ;
            --footer-link-hover-transform: ;
            --footer-copyright-color: ;
            --footer-desc-color: #64748b;

            /* SOCIALS (New Customizations) */
            --social-sidebar-bg: ;
            --social-sidebar-border: ;
            --social-sidebar-shadow: ;
            --social-btn-bg: ;
            --social-btn-border: ;
            --social-btn-color: ;
            --social-btn-hover-bg: ;
            --social-btn-hover-border: ;
            --social-btn-hover-transform: ;
            --social-count-color: ;
            
            --social-desktop-top: ; /* e.g. 50% */
            --social-desktop-left: ; /* e.g. 0 */
            --social-desktop-scale: ; /* e.g. 1.0 */
            
            --mobile-footer-bg: #000000;
            --mobile-footer-border-top: ;
            --mobile-footer-shadow: ;
            --mobile-footer-height: ; /* e.g. 60px */
            
            --copy-toast-bg: ;
            --copy-toast-text: ;
            --copy-toast-border: ;

            /* SHOW MORE BUTTON */
            --show-more-btn-bg: #151515;
            --show-more-btn-border: #000000;
            --show-more-btn-text: #cccccc;
            --show-more-btn-radius: ; /* New */
            --show-more-btn-hover-bg: ;
            --show-more-btn-hover-border: ;
            --show-more-btn-hover-text: ;

            /* UTILITY */
            --scrollbar-thumb-color: #333333;
            
            --back-to-top-bg: #d00000;
            --back-to-top-icon-color: #ffffff;
            --back-to-top-shadow: ;
            --back-to-top-radius: ; /* New */
            --back-to-top-size: ; /* New */
        --sys-status-radius: ;
            
            --sys-status-dot-color: #00c73c;
        --sys-status-dot-size: 10;
            --sys-status-bg: #4ffa05;
            --sys-status-border: ;
            --sys-status-text: #039900;
            
            --section-logo-size: 30; /* New for CLS */
            
            --skeleton-gradient-start: ;
            --skeleton-gradient-mid: ;
            --skeleton-gradient-end: ;

            /* CLS FIXED HEIGHTS */
            --row-h-mob: 76px;
            --row-h-desk: 96px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: var(--font-family-base); background: var(--bg-body); color: var(--text-main); font-size: var(--base-font-size); overflow-x: hidden; padding-bottom: 80px; line-height: var(--base-line-height); }
        a { text-decoration: none; color: inherit; transition: 0.2s; }
        button { cursor: pointer; border: none; font-family: inherit; }
        ul { list-style: none; padding: 0; margin: 0; }
        
        /* SCROLLBAR */
        body::-webkit-scrollbar { width: 8px; }
        body::-webkit-scrollbar-track { background: var(--bg-body); }
        body::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb-color); border-radius: 4px; }

        /* SKELETONS */
        .skeleton { background: var(--skeleton-gradient-start); border-radius: var(--border-radius-base); animation: shimmer 1.5s infinite linear; background: linear-gradient(to right, var(--skeleton-gradient-start) 4%, var(--skeleton-gradient-mid) 25%, var(--skeleton-gradient-end) 36%); background-size: 1000px 100%; }
        .skeleton-header { display: flex; justify-content: space-between; align-items: flex-end; margin: 40px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid ; height: 38px; }
        .sk-title { height: 22px; width: 140px; }
        .sk-count { height: 15px; width: 80px; }
        .skeleton-box { height: var(--row-h-mob); width: 100%; margin-bottom: 8px; border-radius: var(--border-radius-base); border: 1px solid ; }
        @media (min-width: 768px) { .skeleton-box { height: var(--row-h-desk); } }
        @keyframes shimmer { 0% { background-position: -1000px 0; } 100% { background-position: 1000px 0; } }

        /* --- RESTORED HERO STYLES --- */
        h1 { margin: 0 0 20px 0; font-size: 1.8rem; line-height: 1.2; color: var(--hero-h1-color); font-weight: 800; font-family: var(--font-family-headings); }

        .entity-intro { 
            color: var(--hero-intro-color); 
            font-size: 0.9rem; 
            line-height: 1.5; 
            max-width: 800px; 
            margin: ; /* Dynamic Margin Injection */
            margin-bottom: 20px;
        }
        /* ARTICLE CSS */
        .seo-article { 
            background: var(--article-bg); 
            color: var(--article-text); 
            line-height: var(--article-line-height); 
            padding: 20px; 
            border-radius: var(--border-radius-base); 
            margin-top: 40px; 
        }
        .static-h1 {
            color: var(--static-h1-color);
            border-bottom: var(--static-h1-border); /* Use new variable */
            /* ... keep existing font/margin ... */
            font-family: var(--font-family-headings);
            font-size: 2.2rem;
            margin-bottom: 30px;
            padding-bottom: 20px;
        }
        .seo-article h2 { color: var(--article-h2-color); border-bottom: var(--article-h2-border); padding-bottom: 10px; margin-top: 30px; font-size: 1.5rem; }
        .seo-article h3 { color: var(--article-h3-color); font-size: 1.25rem; margin-top: 25px; }
        .seo-article h4 { color: var(--article-h4-color); font-size: 1.1rem; margin-top: 20px; }
        .seo-article p { margin-bottom: 15px; }
        .seo-article a { color: var(--article-link); text-decoration: underline; }
        .seo-article ul, .seo-article ol { margin-left: 20px; margin-bottom: 15px; list-style-type: disc; }
        .seo-article li { margin-bottom: 5px; }
        .seo-article li::marker { color: var(--article-bullet); }

        .cat-scroll { 
            display: flex; 
            gap: 10px; 
            overflow-x: auto;       /* Enable horizontal scroll */
            padding: 10px 5px; 
            width: 100%;            /* Force full width to allow scrolling */
            justify-content: ; /* Dynamic Alignment */
            
            /* Hide Scrollbar & Smooth Scroll */
            scrollbar-width: none;  /* Firefox */
            -ms-overflow-style: none;  /* IE */
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        .cat-scroll::-webkit-scrollbar { display: none; /* Chrome/Safari */ }

        .cat-pill { 
            background: var(--hero-pill-bg); 
            border: 1px solid var(--hero-pill-border); 
            padding: 8px 18px; 
            border-radius: var(--hero-pill-radius);
            font-weight: 700; 
            font-size: 0.8rem; 
            white-space: nowrap; 
            color: var(--hero-pill-text); 
            flex-shrink: 0; /* Prevent shrinking on mobile */
        }
        .cat-pill:hover, .cat-pill.active { border-color: var(--hero-pill-hover-border); color: var(--hero-pill-hover-text); background: var(--hero-pill-hover-bg); }
        /* HEADER */
        header { 
            background: var(--header-bg); 
            backdrop-filter: blur(10px); 
            border-bottom: var(--header-border-bottom); 
            height: 60px; width: 100%; position: relative; z-index: 100; 
        }
        @media (min-width: 900px) { header { position: fixed; top: 0; } body { padding-top: 60px; } }

        .header-container { 
            max-width: var(--header-max-width); /* UPDATE THIS */
            margin: 0 auto; height: 100%; padding: 0 15px; 
            display: flex; align-items: center; position: relative;
        }

        /* --- LAYOUT: STANDARD (Logo Left, Nav Right) --- */
        .h-layout-standard .header-container { justify-content: space-between; }
        .h-layout-standard .logo-link { order: 1; }
        .h-layout-standard .nav-links { order: 2; }
        .h-layout-standard .hamburger { order: 3; display: none; } /* Mobile default */

        /* --- LAYOUT: INVERTED (Logo Right, Nav Left) --- */
        .h-layout-inverted .header-container { justify-content: space-between; }
        .h-layout-inverted .logo-link { order: 2; }
        .h-layout-inverted .nav-links { order: 1; }
        .h-layout-inverted .hamburger { order: 0; display: none; } /* Mobile default */

        /* --- LAYOUT: CENTERED (Logo Center, Hamburger Only) --- */
        .h-layout-center .header-container { justify-content: center; }
        .h-layout-center .logo-link { margin: 0 auto; }
        .h-layout-center .nav-links { display: none !important; } /* Always hide desktop nav links */
        .h-layout-center .hamburger { 
            display: block !important; position: absolute; top: 50%; transform: translateY(-50%); font-size: 1.6rem;
        }
        /* Icon Positioning for Center Layout */
        .h-layout-center.h-icon-left .hamburger { left: 15px; }
        .h-layout-center.h-icon-right .hamburger { right: 15px; }

        /* ELEMENTS */
        .logo-link { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .logo-img { height: var(--logo-image-size); width: var(--logo-image-size); border-radius: var(--border-radius-base); object-fit: cover; box-shadow: 0 0 10px ; }
        .logo-text { font-size: 1.4rem; font-weight: 900; font-style: italic; letter-spacing: -1px; text-transform: uppercase; line-height: 1; }
        .logo-text span { color: var(--logo-text-p2-color); }
        .logo-text { color: var(--logo-text-p1-color); }
        
        .nav-links { display: none; gap: 20px; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; color: var(--header-text-color); height: 100%; }
        .nav-links a { display: flex; align-items: center; height: 100%; border-bottom: 2px solid transparent; transition: all 0.2s ease; }
        
        /* New Hover Color Logic */
        .nav-links a:hover { color: var(--header-link-hover-color); }
        .nav-links a.active { color: var(--header-link-active-color); border-bottom-color: var(--header-link-active-color); }
        /* ADD THIS BLOCK */
        .nav-links a.highlighted { 
            color: var(--header-highlight-color) !important; 
            border-bottom-color: var(--header-highlight-color) !important; 
        }
        .nav-links a.highlighted:hover { 
            color: var(--header-highlight-hover) !important; 
            border-bottom-color: var(--header-highlight-hover) !important; 
        }
        
        /* Mobile Toggle Default Styles */
        .hamburger { display: block; font-size: 1.4rem; color: var(--header-text-color); background: none; cursor: pointer; }
        
        /* Mobile Menu Panel */
        .mobile-menu { position: absolute; top: 60px; left: 0; width: 100%; background: var(--bg-panel); border-bottom: var(--header-border-bottom); display: none; flex-direction: column; z-index: 99; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .mobile-menu.active { display: flex; }
        .mobile-menu a { padding: 15px 20px; border-bottom: 1px solid var(--border); font-weight: 600; color: var(--text-muted); }
        .mobile-menu a:hover { background: rgba(255,255,255,0.05); color: var(--header-link-hover-color); }
        .mobile-menu a.active { color: var(--brand-primary); border-left: 4px solid var(--brand-primary); }

        /* Responsive Visibility for Standard/Inverted */
        @media (min-width: 900px) { 
            .h-layout-standard .nav-links, .h-layout-inverted .nav-links { display: flex; } 
            .h-layout-standard .hamburger, .h-layout-inverted .hamburger { display: none; } 
        }
        /* Mobile overrides for Standard/Inverted (ensure hamburger appears on small screens) */
        @media (max-width: 899px) {
            .h-layout-standard .header-container, .h-layout-inverted .header-container { justify-content: space-between; }
            .h-layout-standard .nav-links, .h-layout-inverted .nav-links { display: none; }
            .h-layout-standard .hamburger, .h-layout-inverted .hamburger { display: block; }
            
            /* Logic for Standard Mobile: Logo Left, Ham Right */
            .h-layout-standard .logo-link { order: 1; }
            .h-layout-standard .hamburger { order: 2; }
            
            /* Logic for Inverted Mobile: Ham Left, Logo Right */
            .h-layout-inverted .logo-link { order: 2; }
            .h-layout-inverted .hamburger { order: 1; }
        }

        /* SOCIALS */
        .social-sidebar { 
            position: fixed; left: 0; top: var(--social-desktop-top); transform: translateY(-50%) scale(var(--social-desktop-scale)); z-index: 90; 
            display: flex; flex-direction: column; gap: 8px; 
            background: var(--social-sidebar-bg); 
            border: 1px solid var(--social-sidebar-border); 
            border-left: none; padding: 12px 8px; 
            border-radius: 0 var(--border-radius-base) var(--border-radius-base) 0; 
            box-shadow: var(--social-sidebar-shadow); 
            backdrop-filter: blur(5px); 
        }
        .social-btn { 
            width: 44px; padding: 6px 0; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; gap: 3px; 
            color: var(--social-btn-color); background: var(--social-btn-bg); 
            border: 1px solid var(--social-btn-border); border-radius: var(--border-radius-base); 
            will-change: transform; transition: transform 0.2s ease, color 0.2s ease, background 0.2s ease; 
            cursor: pointer; 
        }
        .social-btn svg { width: 20px; height: 20px; fill: currentColor; display: block; }
        .social-btn.telegram { color: #a2ba2c; } 
        .social-btn.whatsapp { color: #dadd08; }
        .social-btn.reddit { color: #9bd719; } 
        .social-btn.twitter { color: #8ed50b; } 
        .social-btn.copy { color: var(--social-btn-color); }
        .social-btn:hover { 
            background: var(--social-btn-hover-bg); 
            border-color: var(--social-btn-hover-border); 
            transform: var(--social-btn-hover-transform); 
            box-shadow: 0 4px 10px ; 
        }
        .s-count { font-size: 0.65rem; font-weight: 700; color: var(--social-count-color); letter-spacing: 0.3px; }
        @media (max-width: 1024px) { .social-sidebar { display: none; } }

        /* MOBILE FOOTER */
        .mobile-sticky-footer { 
            position: fixed; bottom: 0; left: 0; width: 100%; 
            background: var(--mobile-footer-bg); backdrop-filter: blur(10px); 
            border-top: var(--mobile-footer-border-top); padding: 0 5px; 
            display: none; justify-content: space-between; align-items: center; 
            z-index: 900; height: var(--mobile-footer-height); 
            box-shadow: var(--mobile-footer-shadow); 
        }
        .mobile-sticky-footer .social-btn { border: none; flex: 1; height: 100%; padding: 0; border-radius: 0; transform: none !important; background: transparent; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 2px; }
        .mobile-sticky-footer .social-btn:active { background: ; }
        .mobile-sticky-footer .s-count { display: block !important; font-size: 0.65rem; color: var(--social-count-color); margin: 0; line-height: 1; }
        .mobile-sticky-footer svg { width: 20px; height: 20px; }
        @media (max-width: 1024px) { .mobile-sticky-footer { display: flex; } }
        
        .copy-toast { 
            position: fixed; left: 50%; bottom: 90px; transform: translateX(-50%); 
            background: var(--copy-toast-bg); border: 1px solid var(--copy-toast-border); 
            color: var(--copy-toast-text); padding: 8px 14px; font-size: 0.75rem; 
            border-radius: var(--border-radius-base); z-index: 9999; opacity: 0; 
            animation: fadeToast 1.6s ease forwards; 
        }
        @keyframes fadeToast { 0% { opacity: 0; transform: translate(-50%, 10px); } 20% { opacity: 1; transform: translate(-50%, 0); } 80% { opacity: 1; } 100% { opacity: 0; } }
        @media (max-width: 768px) { .copy-toast { bottom: 85px; } }

        /* HERO REFACTORED */
        .hero-section {
            /* Styles injected by build script based on mode (Full/Box) */
            
            /* Bottom border applies to the whole section regardless of mode (based on previous request) */
            display: ;
        }
        @media (min-width: 900px) { .hero-section { padding-top: 80px; } }

        .hero-inner {
            /* Styles injected by build script (Width, BG if boxed, Alignment) */
            
            
            /* Flex layout for alignment */
            display: flex;
            flex-direction: column;
            text-align: ;
            align-items: ;
        }
        .entity-intro { 
            color: var(--hero-intro-color); 
            font-size: 0.9rem; 
            line-height: 1.5; 
            max-width: 800px; 
            margin: ; /* Dynamic Margin */
            margin-bottom: 20px;
        }
        
        /* Elements inside Hero */
        .sys-status { 
            display: var(--sys-status-display); /* Toggle Visibility */
            align-items: center; gap: 8px; 
            background: var(--sys-status-bg); 
            border: var(--sys-status-border); /* Use calculated border */
            color: var(--sys-status-text); 
            border-radius: var(--sys-status-radius); /* Use variable */
            
            padding: 5px 14px; margin-bottom: 15px; 
            font-size: 0.75rem; font-weight: 700; 
        }
        .sys-status .dot, .sys-status .live-dot { 
            width: var(--sys-status-dot-size); 
            height: var(--sys-status-dot-size); 
            background: var(--sys-status-dot-color); 
            border-radius: 50%; 
            box-shadow: 0 0 10px var(--sys-status-dot-color); 
        }
        
        h1 { margin: 0 0 20px 0; font-size: 1.8rem; line-height: 1.2; color: var(--hero-h1-color); font-weight: 800; font-family: var(--font-family-headings); }
        .entity-intro { color: var(--hero-intro-color); font-size: 0.9rem; line-height: 1.5; max-width: 800px; margin: 0 0 20px 0; }
        
        /* Hero Menu Visibility */
        .cat-scroll { 
            display: ; 
            gap: 10px; overflow-x: auto; padding: 10px 5px; 
            justify-content: ; /* Matches hero alignment */
            scrollbar-width: none; width: 100%; margin: 0;
        }
        #live-section .sec-head, #live-content-wrapper .sec-head { 
            border-bottom: ; 
        }
        #top-upcoming-container .sec-head { 
            border-bottom: ; 
        }
        #wildcard-container .sec-head { 
            border-bottom: ; 
        }
        #footer-leagues-section .sec-head { 
            border-bottom: ; 
        }
        #grouped-container .sec-head {
            border-bottom: ;
        }
        #grouped-container {
    content-visibility: auto; /* Magic performance fix for Mobile */
    contain-intrinsic-size: 1000px; /* Prevents scrollbar jumping */
}
        
        .container { max-width: var(--container-max-width); margin: 0 auto; padding: 20px 15px; min-height: 60vh; }
        .sec-head { display: flex; justify-content: space-between; align-items: flex-end; margin: 40px 0 12px 0; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
        .sec-title { font-size: 1.2rem; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 10px; text-transform: uppercase; margin: 0; font-family: var(--font-family-headings); }
        .sec-logo { width: var(--section-logo-size); height: var(--section-logo-size); object-fit: contain; }
        .live-dot { width: 8px; height: 8px; background: var(--brand-primary); border-radius: 50%; box-shadow: 0 0 10px var(--brand-primary); }
        .sec-right-link { font-size: 0.8rem; font-weight: 600; color: var(--text-muted); cursor: pointer; text-decoration: none; }
        .sec-right-link:hover { color: var(--brand-primary); text-decoration: underline; }
        
        /* MATCH ROW */
        .match-row { 
            display: grid; grid-template-columns: 45px 1fr 50px 75px; align-items: center; gap: 8px; 
            background: var(--match-row-bg); border: 1px solid var(--match-row-border); 
            border-radius: var(--border-radius-base); padding: 10px 8px 5px 8px; margin-bottom: 8px; 
            position: relative; transition: 0.2s; height: var(--row-h-mob); overflow: hidden;
        }
        .match-row:hover { border-color: var(--match-row-hover-border); background: var(--match-row-hover-bg); transform: var(--match-row-hover-transform); }
        .match-row.live { border-left: var(--match-row-live-border-left); background: linear-gradient(90deg, var(--match-row-live-bg-start) 0%, var(--match-row-live-bg-end) 100%); }
        @media (min-width: 768px) { .match-row { grid-template-columns: 80px 1fr 100px 110px; padding: 15px 20px 10px 20px; gap: 20px; height: var(--row-h-desk); } }
        
        .col-time { text-align: center; display: flex; flex-direction: column; justify-content: center; gap: 2px; }
        .time-label { font-size: 0.55rem; color: var(--text-muted); font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px; }
        .time-main { font-size: 0.75rem; font-weight: 700; color: var(--match-row-time-main-color); }
        .time-sub { font-size: 0.6rem; color: var(--match-row-time-sub-color); }
        .live-txt { color: var(--match-row-live-text-color); font-weight: 900; animation: blink 1.5s infinite; font-size: 0.65rem; }
        
        .teams-wrapper { display: flex; flex-direction: column; gap: 3px; overflow: hidden; justify-content: center; height: 100%; }
        .league-tag { font-size: 0.6rem; color: var(--match-row-league-tag-color); font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .team-name { font-size: 0.75rem; font-weight: 600; color: var(--match-row-team-name-color); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: flex; align-items: center; gap: 6px; }
        @media (min-width: 768px) { .team-name { font-size: 0.95rem; } }
        
        .logo-box { width: 20px; height: 20px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; position: relative; margin-right: 4px; }
        .t-img { width: 100%; height: 100%; object-fit: contain; border-radius: 50%; }
        .t-logo { width: 100%; height: 100%; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 900; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); position: absolute; top: 0; left: 0; }
        
        .col-meta { display: flex; flex-direction: column; align-items: flex-end; gap: 3px; justify-content: center; }
        .meta-top { font-size: 0.7rem; font-weight: 700; color: var(--accent-gold); white-space: nowrap; }
        
        .col-action { margin-left: auto; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 5px; }
        
        .btn-watch { 
            background: var(--match-row-btn-watch-bg); color: var(--match-row-btn-watch-text); 
            font-size: 0.65rem; font-weight: 800; padding: 6px 10px; 
            border-radius: var(--button-border-radius); width: 100%; text-transform: uppercase; 
            transition: 0.2s; box-shadow: 0 2px 5px ; 
            display:flex; align-items:center; justify-content:center; gap:5px; height: 26px; 
        }
        .btn-watch:hover { background: var(--match-row-btn-watch-hover-bg); transform: var(--match-row-btn-watch-hover-transform); }
        
        .hd-badge { background: var(--match-row-hd-badge-bg); padding: 1px 4px; border-radius: 3px; font-size: 0.55rem; border: 1px solid var(--match-row-hd-badge-border); color: var(--match-row-hd-badge-text); }
        
        .btn-notify { 
            background: var(--match-row-btn-notify-bg); 
            border: 1px solid var(--match-row-btn-notify-border); 
            color: var(--match-row-btn-notify-text); 
            padding: 0 10px;                  /* Fixes padding issue */
            width: 100%;                      /* Fixes shrinking: forces button to fill the grid cell */
            display: flex;                    /* layout fix */
            align-items: center;              /* layout fix */
            justify-content: center;          /* layout fix */
            box-shadow: none; 
            transition: all 0.25s ease; 
            height: 26px; 
            border-radius: var(--button-border-radius); /* Ensures rounded corners match other buttons */
            font-size: 0.65rem; 
            font-weight: 700; 
        }
        .btn-notify.active { border-color: var(--match-row-btn-notify-active-border); color: var(--match-row-btn-notify-active-text); background: var(--match-row-btn-notify-active-bg); cursor: default; }
        
        .btn-copy-link { background: none; border: none; color: var(--match-row-btn-copy-link-color); font-size: 0.65rem; font-weight: 700; text-transform: uppercase; cursor: pointer; display: flex; align-items: center; gap: 4px; transition: 0.2s; padding: 0; margin-top: 5px; }
        .btn-copy-link:hover { color: var(--match-row-btn-copy-link-hover-color); }
        .btn-copy-link svg { width: 12px; height: 12px; fill: currentColor; }

        .show-more-btn { 
            display: block; width: 100%; max-width: 300px; margin: 20px auto; 
            background: var(--show-more-btn-bg); border: 1px solid var(--show-more-btn-border); 
            color: var(--show-more-btn-text); padding: 12px; 
            border-radius: var(--show-more-btn-radius); font-weight: 600; font-size: 0.85rem; 
            transition:0.2s; cursor: pointer; 
        }
        .show-more-btn:hover { border-color: var(--show-more-btn-hover-border); color: var(--show-more-btn-hover-text); background: var(--show-more-btn-hover-bg); }
        
        .leagues-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px; margin-top: 15px; }
        
        .league-card { 
            background: #bb1b1b; 
            /* REMOVED "1px solid" because the variable already contains it */
            border: ; 
            color: #e1dbdb;
            /* Use the new radius variable */
            border-radius: 18; 
            
            padding: 10px 15px; 
            display: flex; align-items: center; gap: 10px; 
            transition: 0.2s; white-space: nowrap; overflow: hidden; 
        }
        
        .league-card:hover { 
            /* Use "border" instead of "border-color" to handle width/style changes */
            border: ; 
            background: #347ba8; 
            color: #222020;
            transform: translateY(-2px); 
        }
        
        .league-card span { 
            font-size: 0.8rem; font-weight: 700; color: inherit; /* Inherit allows hover text change */
            overflow: hidden; text-overflow: ellipsis; 
        }
        .l-icon { font-size: 1.1rem; }
        
        /* FOOTER LAYOUT */
        footer { 
            background: linear-gradient(180deg, var(--footer-bg-start) 0%, var(--footer-bg-end) 100%); 
            border-top: var(--footer-border-top); 
            padding: 60px 20px 30px 20px; 
            margin-top: 60px; 
        }

        /* Base Grid (Mobile Default) */
        .footer-grid { 
            width: 100%; 
            max-width: var(--container-max-width); 
            margin: 0 auto; 
            display: flex; 
            flex-direction: column; 
            gap: 40px; 
            text-align: center; /* Center on mobile for pro look */
        }

        /* DESKTOP LAYOUTS */
        @media(min-width: 768px) { 
            /* 2 COLUMNS: Extreme Left & Extreme Right */
            .footer-grid.cols-2 {
                display: flex;
                flex-direction: row;
                justify-content: space-between; /* Pushes items to edges */
                align-items: flex-start;
                text-align: left; 
                flex-wrap: wrap; /* Allows 3rd item to wrap if present */
            }
            /* Force the 2nd column to align text to the right */
            .footer-grid.cols-2 > div:nth-child(2) {
                text-align: right;
            }
            /* If a 3rd element exists in 2-col mode, center it below */
            .footer-grid.cols-2 > div:nth-child(3) {
                width: 100%;
                text-align: center;
                margin-top: 40px;
                border-top: 1px solid rgba(255,255,255,0.1); /* Subtle separator */
                padding-top: 20px;
            }

            /* 3 COLUMNS: Equal Widths */
            .footer-grid.cols-3 {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr; /* Exactly 3 equal columns */
                gap: 20px;
                text-align: left;
            }
            /* Professional Alignment: Left | Center | Right */
            .footer-grid.cols-3 > div:nth-child(1) { text-align: left; }
            .footer-grid.cols-3 > div:nth-child(2) { text-align: center; }
            .footer-grid.cols-3 > div:nth-child(3) { text-align: right; }
        }

        .f-brand h2 { margin: 0 0 15px 0; font-style: italic; text-transform: uppercase; color: ; letter-spacing: -1px; }
        .f-desc { color: var(--footer-desc-color); font-size: 0.85rem; line-height: 1.6; max-width: 400px; margin: 0 auto; }
        @media(min-width: 768px) { .f-desc { margin: 0; } }
        .f-links { display: flex; flex-direction: column; gap: 12px; }
        .f-link { color: var(--footer-link-color); font-size: 0.9rem; font-weight: 500; transition: 0.2s; }
        .f-link:hover { color: var(--footer-link-hover-color); transform: var(--footer-link-hover-transform); }
        .copyright { margin-top: 50px; border-top: 1px solid var(--border); padding-top: 25px; text-align: center; font-size: 0.75rem; color: var(--footer-copyright-color); }
        .f-head { color: var(--footer-heading-color); margin-bottom: 15px; text-transform: uppercase; font-size: 0.9rem; font-weight: 700; }
        
        .back-to-top { 
            position: fixed; bottom: 80px; right: 20px; 
            background: var(--back-to-top-bg); width: var(--back-to-top-size); height: var(--back-to-top-size); 
            border-radius: var(--back-to-top-radius); display: flex; align-items: center; justify-content: center; 
            color: var(--back-to-top-icon-color); cursor: pointer; opacity: 0; visibility: hidden; 
            transition: 0.3s; z-index: 90; 
            box-shadow: var(--back-to-top-shadow); 
        }
        .back-to-top.show { opacity: 1; visibility: visible; }
        .back-to-top svg { width: 24px; height: 24px; fill: var(--back-to-top-icon-color); }
        @media (min-width: 768px) { .back-to-top { bottom: 30px; } }

        @keyframes blink { 0%, 100% {opacity:1;} 50% {opacity:0.4;} }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    
    <div id="socialSidebar" class="social-sidebar"></div>

    <header class="">
        <div class="header-container">
            <a href="/" class="logo-link"></a>
            <nav class="nav-links" id="desktopNav"></nav>
            <button class="hamburger" onclick="toggleMenu()">‚ò∞</button>
        </div>
    </header>
    <div class="mobile-menu" id="mobileMenu"></div>

    <div class="hero-section">
        <div class="hero-inner">
            <div class="sys-status"><div class="dot"></div> System Status: Online</div>
            <h1>MLS</h1>
            <p class="entity-intro">Watch high quality MLS streams live.</p>
            <div class="cat-scroll"></div>
        </div>
    </div>

    <main class="container ">
        
        <!-- 1. LIVE SECTION -->
        <div id="live-section">
            <div id="live-sk-head" class="skeleton skeleton-header">
                <div class="sk-title"></div><div class="sk-count"></div>
            </div>
            <div id="live-skeleton">
                <div class="skeleton skeleton-box"></div>
                <div class="skeleton skeleton-box"></div>
                <div class="skeleton skeleton-box"></div>
                <div class="skeleton skeleton-box"></div>
                <div class="skeleton skeleton-box"></div>
            </div>
            <div id="live-content-wrapper" style="display:none;">
                <div class="sec-head">
                    <h2 class="sec-title"><div class="live-dot"></div> </h2>
                    <div class="sec-right-link" id="live-count"></div>
                </div>
                <div id="trending-list" class="match-list"></div>
                <button id="show-more-live" class="show-more-btn" style="display:none">View more ‚ñº</button>
                <div id="hidden-live-list" class="match-list" style="display:none; margin-top:10px;"></div>
            </div>
        </div>
        
        <!-- 2. WILDCARD SECTION (NEW) -->
        <div id="wildcard-container"></div>

        <!-- 3. TOP 5 UPCOMING -->
        <div id="upcoming-skeleton" style="display:none">
             <div class="skeleton skeleton-header"><div class="sk-title"></div></div>
             <div class="skeleton skeleton-box"></div>
             <div class="skeleton skeleton-box"></div>
             <div class="skeleton skeleton-box"></div>
             <div class="skeleton skeleton-box"></div>
             <div class="skeleton skeleton-box"></div>
        </div>
        <div id="top-upcoming-container"></div>

        <!-- 4. BOOSTED, LEAGUES & SPORTS -->
        <div id="grouped-container">
    <div class="section-box" style="margin-bottom:30px;">
        <div class="sec-head">
            <h2 class="sec-title"> Schedule</h2>
        </div>
        <div>
    <div class="match-row " data-match-id="kk-beko-belgrade-vs-klik-arilje-f9e28f05ebdd68f832b9d2c4f319ac8e">
        <div class="col-time">
            <span class="time-main">7h 43m</span>
        </div>
        <div class="teams-wrapper">
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="KK Beko Belgrade"></div>
                KK Beko Belgrade
            </div>
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Klik Arilje"></div>
                Klik Arilje
            </div>
        </div>
        <div class="col-meta">
            <span class="meta-top">Serbia - 2.MLS</span>
        </div>
        <div class="col-action">
            <a href="/watch/?stream=kk-beko-belgrade-vs-klik-arilje-f9e28f05ebdd68f832b9d2c4f319ac8e" class="btn-watch">Watch</a>
        </div>
    </div>
    
    <div class="match-row " data-match-id="ivanjica-vs-mladost-sp-d3fa1ddf2f5da03c7a80f7329d9292a8">
        <div class="col-time">
            <span class="time-main">8h 43m</span>
        </div>
        <div class="teams-wrapper">
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Ivanjica"></div>
                Ivanjica
            </div>
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Mladost SP"></div>
                Mladost SP
            </div>
        </div>
        <div class="col-meta">
            <span class="meta-top">Serbia - 2.MLS</span>
        </div>
        <div class="col-action">
            <a href="/watch/?stream=ivanjica-vs-mladost-sp-d3fa1ddf2f5da03c7a80f7329d9292a8" class="btn-watch">Watch</a>
        </div>
    </div>
    
    <div class="match-row " data-match-id="sloven-vs-ibc-5939441f9611d61a89decead7b2c841e">
        <div class="col-time">
            <span class="time-main">8h 43m</span>
        </div>
        <div class="teams-wrapper">
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Sloven"></div>
                Sloven
            </div>
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Ibc"></div>
                Ibc
            </div>
        </div>
        <div class="col-meta">
            <span class="meta-top">Serbia - 2.MLS</span>
        </div>
        <div class="col-action">
            <a href="/watch/?stream=sloven-vs-ibc-5939441f9611d61a89decead7b2c841e" class="btn-watch">Watch</a>
        </div>
    </div>
    
    <div class="match-row " data-match-id="jagodina-vs-konstantin-nis-21b5d60f168becd57dc4a998188b7649">
        <div class="col-time">
            <span class="time-main">8h 43m</span>
        </div>
        <div class="teams-wrapper">
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Jagodina"></div>
                Jagodina
            </div>
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Konstantin Nis"></div>
                Konstantin Nis
            </div>
        </div>
        <div class="col-meta">
            <span class="meta-top">Serbia - 2.MLS</span>
        </div>
        <div class="col-action">
            <a href="/watch/?stream=jagodina-vs-konstantin-nis-21b5d60f168becd57dc4a998188b7649" class="btn-watch">Watch</a>
        </div>
    </div>
    
    <div class="match-row " data-match-id="pirot-vs-zdravlje-leskovac-fb0e8af69ba08c5889e3fcb0c3299808">
        <div class="col-time">
            <span class="time-main">1d 10h</span>
        </div>
        <div class="teams-wrapper">
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Pirot"></div>
                Pirot
            </div>
            <div class="team-name">
                <div class="logo-box"><img src="" class="t-img" loading="lazy" alt="Zdravlje Leskovac"></div>
                Zdravlje Leskovac
            </div>
        </div>
        <div class="col-meta">
            <span class="meta-top">Serbia - 2.MLS</span>
        </div>
        <div class="col-action">
            <a href="/watch/?stream=pirot-vs-zdravlje-leskovac-fb0e8af69ba08c5889e3fcb0c3299808" class="btn-watch">Watch</a>
        </div>
    </div>
    </div>
    </div>
    </div>
        
        <div class="seo-article"></div>

        <div id="footer-leagues-section" class="section-box" style="margin-top:50px;">
            <div class="sec-head"><h2 class="sec-title">üèÜ Popular Leagues</h2></div>
            <div class="leagues-grid"></div>
        </div>

    </main>

    <footer class="">
        <!-- Dynamic Grid injected by Python based on Admin slots -->
        
        
        <div class="copyright"></div>
    </footer>

    <!-- MOBILE STICKY FOOTER -->
    <div id="mobileFooter" class="mobile-sticky-footer"></div>

    <button id="backToTop" class="back-to-top" onclick="window.scrollTo(0,0)">
        <svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
    </button>

    <script>
        // ==========================================
        // 1. CONFIGURATION & STATE
        // ==========================================
        const API_URL = "https://vercelapi-olive.vercel.app/api/sync-nodes";
        const TARGET_COUNTRY = "US";
        const PARAM_LIVE = "streams";
        const PARAM_INFO = "livestream";
        const PRIORITIES = {"_HIDE_OTHERS": false, "_BOOST": "nhl", "NFL": {"score": 100, "isLeague": true, "hasLink": true, "isHidden": false}, "NBA": {"score": 99, "isLeague": true, "hasLink": true, "isHidden": false}, "NCAA": {"score": 98, "isLeague": true, "hasLink": true, "isHidden": false}, "MLB": {"score": 97, "isLeague": true, "hasLink": true, "isHidden": false}, "NHL": {"score": 96, "isLeague": true, "hasLink": true, "isHidden": false}, "UFC": {"score": 95, "isLeague": true, "hasLink": true, "isHidden": false}, "Premier League": {"score": 90, "isLeague": true, "hasLink": true, "isHidden": false}, "Champions League": {"score": 89, "isLeague": true, "hasLink": true, "isHidden": false}, "Formula 1": {"score": 88, "isLeague": true, "hasLink": true, "isHidden": false}, "MLS": {"score": 87, "isLeague": true, "hasLink": true, "isHidden": false}, "Africa Cup of Nations": {"score": 86, "isLeague": true, "hasLink": true, "isHidden": false}, "La Liga": {"score": 85, "isLeague": true, "hasLink": true, "isHidden": false}, "Liga MX": {"score": 84, "isLeague": true, "hasLink": false, "isHidden": false}, "Football": {"score": 79, "isLeague": false, "hasLink": false, "isHidden": false}, "Basketball": {"score": 78, "isLeague": false, "hasLink": false, "isHidden": false}, "Baseball": {"score": 77, "isLeague": false, "hasLink": false, "isHidden": false}, "Fighting": {"score": 76, "isLeague": false, "hasLink": false, "isHidden": false}, "Soccer": {"score": 60, "isLeague": false, "hasLink": false, "isHidden": false}, "Tennis": {"score": 40, "isLeague": false, "hasLink": true, "isHidden": false}, "Golf": {"score": 30, "isLeague": false, "hasLink": false, "isHidden": false}}; 
        const SITE_DOMAIN = "https://streameast.guru";
        
        // SERVER-SIDE INJECTED MAPS (Performance Optimized)
        const TEAM_TO_LEAGUE = {"A-League Men": ["adelaide-united", "auckland-fc", "brisbane-roar", "central-coast-mariners", "macarthur-fc", "melbourne-city", "melbourne-victory", "newcastle-jets", "perth-glory", "sydney-fc", "wellington-phoenix", "western-sydney-wanderers", "western-united"], "A-League Women": ["adelaide-united", "brisbane-roar", "canberra-united", "central-coast-mariners", "melbourne-city", "melbourne-victory", "newcastle-jets", "perth-glory", "sydney-fc", "wellington-phoenix", "western-sydney-wanderers", "western-united"], "Bundesliga": ["bayer-leverkusen", "bayern-munich", "bochum", "borussia-dortmund", "borussia-monchengladbach", "eintracht-frankfurt", "fc-augsburg", "fc-heidenheim", "freiburg", "holstein-kiel", "mainz-05", "rb-leipzig", "st-pauli", "stuttgart", "tsg-hoffenheim", "union-berlin", "werder-bremen", "wolfsburg"], "Championship": ["blackburn-rovers", "bristol-city", "burnley", "cardiff-city", "coventry-city", "derby-county", "hull-city", "leeds-united", "luton-town", "middlesbrough", "millwall", "norwich-city", "oxford-united", "plymouth-argyle", "portsmouth", "preston-north-end", "queens-park-rangers", "sheffield-united", "sheffield-wednesday", "stoke-city", "sunderland", "swansea-city", "watford", "west-bromwich-albion"], "EUROLEAGUE": ["alba-berlin", "anadolu-efes", "as-monaco", "baskonia", "bayern-munich", "crvena-zvezda", "fc-barcelona", "fenerbahce", "ldlc-asvel", "maccabi-tel-aviv", "olimpia-milano", "olympiacos", "panathinaikos", "paris-basketball", "partizan", "real-madrid", "virtus-bologna", "zalgiris"], "Eredivisie": ["ajax", "almere-city", "az-alkmaar", "feyenoord", "fortuna-sittard", "go-ahead-eagles", "groningen", "heerenveen", "heracles-almelo", "nac-breda", "nec-nijmegen", "pec-zwolle", "psv-eindhoven", "rkc-waalwijk", "sparta-rotterdam", "twente", "utrecht", "willem-ii"], "FORMULA 1": ["alpine", "aston-martin", "ferrari", "haas", "kick-sauber", "mclaren", "mercedes", "rb", "red-bull-racing", "williams"], "La Liga": ["athletic-bilbao", "atletico-madrid", "barcelona", "celta-vigo", "deportivo-alaves", "espanyol", "getafe", "girona", "las-palmas", "leganes", "mallorca", "osasuna", "rayo-vallecano", "real-betis", "real-madrid", "real-sociedad", "real-valladolid", "sevilla", "valencia", "villarreal"], "Ligue 1": ["angers", "auxerre", "brest", "le-havre", "lens", "lille", "lyon", "marseille", "monaco", "montpellier", "nantes", "nice", "paris-saint-germain", "reims", "rennes", "saint-etienne", "strasbourg", "toulouse"], "MLB": ["arizona-diamondbacks", "atlanta-braves", "baltimore-orioles", "boston-red-sox", "chicago-cubs", "chicago-white-sox", "cincinnati-reds", "cleveland-guardians", "colorado-rockies", "detroit-tigers", "houston-astros", "kansas-city-royals", "los-angeles-angels", "los-angeles-dodgers", "miami-marlins", "milwaukee-brewers", "minnesota-twins", "new-york-mets", "new-york-yankees", "oakland-athletics", "philadelphia-phillies", "pittsburgh-pirates", "san-diego-padres", "san-francisco-giants", "seattle-mariners", "st-louis-cardinals", "tampa-bay-rays", "texas-rangers", "toronto-blue-jays", "washington-nationals"], "MLS": ["atlanta-united", "austin-fc", "charlotte-fc", "chicago-fire", "fc-cincinnati", "colorado-rapids", "columbus-crew", "dc-united", "fc-dallas", "houston-dynamo", "inter-miami", "la-galaxy", "lafc", "minnesota-united", "cf-montreal", "nashville-sc", "new-england-revolution", "new-york-city-fc", "new-york-red-bulls", "orlando-city", "philadelphia-union", "portland-timbers", "real-salt-lake", "san-diego-fc", "san-jose-earthquakes", "seattle-sounders", "sporting-kansas-city", "st-louis-city", "toronto-fc", "vancouver-whitecaps"], "NBA": ["atlanta-hawks", "boston-celtics", "brooklyn-nets", "charlotte-hornets", "chicago-bulls", "cleveland-cavaliers", "dallas-mavericks", "denver-nuggets", "detroit-pistons", "golden-state-warriors", "houston-rockets", "indiana-pacers", "los-angeles-clippers", "los-angeles-lakers", "memphis-grizzlies", "miami-heat", "milwaukee-bucks", "minnesota-timberwolves", "new-orleans-pelicans", "new-york-knicks", "oklahoma-city-thunder", "orlando-magic", "philadelphia-76ers", "phoenix-suns", "portland-trail-blazers", "sacramento-kings", "san-antonio-spurs", "toronto-raptors", "utah-jazz", "washington-wizards"], "NFL": ["arizona-cardinals", "atlanta-falcons", "baltimore-ravens", "buffalo-bills", "carolina-panthers", "chicago-bears", "cincinnati-bengals", "cleveland-browns", "dallas-cowboys", "denver-broncos", "detroit-lions", "green-bay-packers", "houston-texans", "indianapolis-colts", "jacksonville-jaguars", "kansas-city-chiefs", "las-vegas-raiders", "los-angeles-chargers", "los-angeles-rams", "miami-dolphins", "minnesota-vikings", "new-england-patriots", "new-orleans-saints", "new-york-giants", "new-york-jets", "philadelphia-eagles", "pittsburgh-steelers", "san-francisco-49ers", "seattle-seahawks", "tampa-bay-buccaneers", "tennessee-titans", "washington-commanders"], "NHL": ["anaheim-ducks", "boston-bruins", "buffalo-sabres", "calgary-flames", "carolina-hurricanes", "chicago-blackhawks", "colorado-avalanche", "columbus-blue-jackets", "dallas-stars", "detroit-red-wings", "edmonton-oilers", "florida-panthers", "los-angeles-kings", "minnesota-wild", "montreal-canadiens", "nashville-predators", "new-jersey-devils", "new-york-islanders", "new-york-rangers", "ottawa-senators", "philadelphia-flyers", "pittsburgh-penguins", "san-jose-sharks", "seattle-kraken", "st-louis-blues", "tampa-bay-lightning", "toronto-maple-leafs", "utah-hockey-club", "vancouver-canucks", "vegas-golden-knights", "washington-capitals", "winnipeg-jets"], "Premier League": ["arsenal", "aston-villa", "bournemouth", "brentford", "brighton-and-hove-albion", "chelsea", "crystal-palace", "everton", "fulham", "ipswich-town", "leicester-city", "liverpool", "manchester-city", "manchester-united", "newcastle-united", "nottingham-forest", "southampton", "tottenham-hotspur", "west-ham-united", "wolverhampton-wanderers"], "Primeira Liga": ["arouca", "avs", "benfica", "boavista", "braga", "casa-pia", "estoril-praia", "estrela-amadora", "famalicao", "farense", "gil-vicente", "moreirense", "nacional", "porto", "rio-ave", "santa-clara", "sporting-cp", "vitoria-guimaraes"], "Saudi Pro League": ["al-ahli", "al-akhdoud", "al-etifaq", "al-fateh", "al-fayha", "al-hilal", "al-ittihad", "al-khaleej", "al-kholood", "al-nassr", "al-orubah", "al-qadsiah", "al-raed", "al-riyadh", "al-shabab", "al-taawoun", "al-tai", "al-wehda", "damac"], "Scottish Premiership": ["aberdeen", "celtic", "dundee", "dundee-united", "heart-of-midlothian", "hibernian", "kilmarnock", "motherwell", "rangers", "ross-county", "st-johnstone", "st-mirren"], "Serie A": ["ac-milan", "atalanta", "bologna", "cagliari", "como", "empoli", "fiorentina", "genoa", "hellas-verona", "inter-milan", "juventus", "lazio", "lecce", "monza", "napoli", "parma", "roma", "torino", "udinese", "venezia"], "null": ["<h2>watch-{{home}}-vs-{{away}}-live-stream</h2>-<p>-get-ready-for-the-ultimate-{{sport}}-showdown!-<strong>{{home}}</strong>-takes-on-<strong>{{away}}</strong>-in-the-{{league}}.-the-event-is-scheduled-to-start-at-<strong>{{time}}</strong>-on-<strong>{{date}}</strong>.-</p>-<p>-{{site_name}}-is-your-number-one-source-for-free-live-sports.-whether-you-are-rooting-for-{{home}}-or-{{away}}", "we-provide-the-highest-quality-streams-with-zero-buffering.-</p>-<h3>match-preview:-{{home}}-vs-{{away}}</h3>-<p>-this-{{league}}-match-promises-to-be-exciting.-join-our-community-chat-on-the-right-side-to-discuss-the-play-by-play-action-with-other-fans.-</p>-<h3>how-to-watch-{{league}}-online</h3>-<ol>-<li>wait-for-the-countdown-to-finish.</li>-<li>click-the-\"watch-live-stream\"-button.</li>-<li>select-a-server-from-the-list.</li>-<li>enjoy-{{home}}-vs-{{away}}-in-hd!</li>-</ol>-<hr-style=\"border:-0;-border-top:-1px-solid-var(--border);-margin:-30px-0;\">-<p-style=\"font-size:-0.8rem;-color:-var(--text-muted);\">-<strong>disclaimer:</strong>-we-do-not-host-any-content.-this-page-allows-you-to-watch-{{home}}-vs-{{away}}-via-external-video-providers.-</p>"]}; 
        const IMAGE_MAP = {};
        const WILDCARD_CATEGORY = "";

        const SHARE_CONFIG = {
            excluded: ['dmca', 'about', 'contact', 'privacy'],
            counts: { telegram: 1240, whatsapp: 850, reddit: 340, twitter: 510 } 
        };
        const THEME_CONFIG = {"font_family_base": "system-ui, -apple-system, sans-serif", "font_family_headings": "'Courier New', monospace", "border_radius_base": "0", "container_max_width": "950", "brand_primary": "#d00000", "brand_dark": "#8a0000", "accent_gold": "#ffd700", "status_green": "#00e676", "bg_body": "#050505", "bg_panel": "#0f0f0f", "text_main": "#ffffff", "text_muted": "#888888", "border_color": "#222222", "scrollbar_thumb_color": "#333333", "header_bg": "#050505", "header_text_color": "#aaaaaa", "header_link_active_color": "#ffffff", "header_max_width": "1000", "logo_p1_color": "#ffffff", "logo_p2_color": "#d00000", "header_border_bottom": "1px solid var(--border)", "header_layout": "standard", "header_icon_pos": "left", "header_link_hover_color": "#3e0a0a", "header_highlight_color": "#02ed12", "header_highlight_hover": "#bf1d1d", "hero_bg_style": "gradient", "hero_bg_solid": "#ffffff", "hero_gradient_start": "#1c0202", "hero_gradient_end": "#000000", "hero_bg_image_url": "", "hero_bg_image_overlay_opacity": "0.5", "hero_h1_color": "#ffffff", "hero_intro_color": "#999999", "hero_pill_bg": "#111111", "hero_pill_text": "#cccccc", "hero_pill_hover_bg": "#2a0a0a", "hero_pill_hover_text": "#ffffff", "hero_border_bottom": "", "hero_layout_mode": "full", "hero_content_align": "center", "hero_menu_visible": "flex", "hero_box_width": "1100", "hero_featured_match": true, "hero_box_border_width": "4", "hero_box_border_color": "#acf410", "hero_border_top": true, "hero_border_bottom_box": false, "hero_border_left": true, "hero_border_right": true, "button_border_radius": "21", "hero_pill_radius": "8", "hero_main_border_width": "5", "hero_main_border_color": "#4416e9", "hero_main_border_pos": "full", "text_sys_status": "System Status: Online", "sec_border_live_width": "3", "sec_border_live_color": "#e70856", "sec_border_upcoming_width": "4", "sec_border_upcoming_color": "#1152a7", "sec_border_wildcard_width": "1", "sec_border_wildcard_color": "#334155", "sec_border_leagues_width": "6", "sec_border_leagues_color": "#aae114", "sec_border_grouped_width": "3", "sec_border_grouped_color": "#00b37d", "match_row_bg": "#121212", "match_row_border": "#222222", "match_row_team_name_color": "#ffffff", "match_row_time_main_color": "#888888", "match_row_live_border_left": "3px solid var(--brand-primary)", "match_row_live_bg_start": "#1a0505", "match_row_live_bg_end": "#141414", "match_row_live_text_color": "#d00000", "row_height_mode": "standard", "match_row_btn_watch_bg": "#d00000", "match_row_btn_watch_text": "#ffffff", "footer_bg_start": "#0e0e0e", "footer_bg_end": "#050505", "footer_desc_color": "#64748b", "footer_link_color": "#94a3b8", "footer_text_align_desktop": "left", "footer_grid_columns_desktop": "2fr 1fr", "wildcard_category": "", "text_live_section_title": "Air On Now", "text_wildcard_title": "Section title test Single league", "text_top_upcoming_title": "Top 5 section title test", "text_show_more": "View more", "text_section_link": "Show More", "text_watch_btn": "Streams", "text_hd_badge": "SD", "text_section_prefix": "Hey", "match_row_hover_bg": "#1a1a1a", "match_row_hover_border": "#444444", "section_logo_size": "30", "show_more_btn_bg": "#151515", "show_more_btn_border": "#000000", "show_more_btn_text": "#cccccc", "show_more_btn_radius": "", "social_desktop_top": "", "social_desktop_left": "", "social_desktop_scale": "", "mobile_footer_height": "", "mobile_footer_bg": "#000000", "back_to_top_bg": "#d00000", "back_to_top_icon_color": "#ffffff", "back_to_top_radius": "", "back_to_top_size": "", "display_hero": "block", "social_telegram_color": "#a2ba2c", "social_whatsapp_color": "#dadd08", "social_reddit_color": "#9bd719", "social_twitter_color": "#8ed50b", "sec_border_league_upcoming_width": "4", "sec_border_league_upcoming_color": "#dfe30d", "article_bg": "#0a0a0a", "article_text": "#e5e0e0", "article_line_height": "", "article_bullet_color": "#e907a1", "article_link_color": "#df0c0c", "article_h2_color": "#0400f0", "article_h2_border_width": "3", "article_h2_border_color": "#05c0e6", "article_h3_color": "#4ff906", "article_h4_color": "#df2707", "league_card_bg": "#bb1b1b", "league_card_text": "#e1dbdb", "league_card_border_color": "#11494a", "league_card_border_width": "3", "league_card_radius": "18", "league_card_hover_bg": "#347ba8", "league_card_hover_text": "#222020", "league_card_hover_border_color": "#ad0b0b", "static_h1_color": "#000000", "static_h1_border_width": "1", "static_h1_border_color": "#000000", "sys_status_visible": false, "sys_status_text_color": "#039900", "sys_status_bg_color": "#4ffa05", "sys_status_border_color": "#01fe12", "sys_status_border_width": "", "sys_status_radius": "", "sys_status_dot_color": "#00c73c", "sys_status_dot_size": "10", "static_h1_align": "left", "footer_columns": "3", "footer_show_disclaimer": false, "footer_slot_1": "brand", "footer_slot_2": "disclaimer", "footer_slot_3": "menu", "sys_status_bg_opacity": "0.15", "sys_status_bg_transparent": false, "watch_sidebar_swap": false, "watch_show_ad1": false, "watch_show_discord": false, "watch_show_ad2": false, "watch_discord_order": "top", "watch_discord_title": "", "watch_discord_btn_text": "", "chat_header_title": "", "chat_header_bg": "#000000", "chat_header_text": "#000000", "chat_dot_color": "#000000", "chat_dot_size": "", "chat_overlay_bg": "#000000", "chat_overlay_opacity": "0.5", "chat_input_bg": "#000000", "chat_input_text": "#000000", "chat_join_btn_text": "", "watch_table_head_bg": "#000000", "watch_table_body_bg": "#000000", "watch_table_border": "#000000", "watch_table_radius": "", "watch_team_color": "#000000", "watch_vs_color": "#000000", "watch_team_size": "", "watch_vs_size": "", "watch_btn_bg": "#000000", "watch_btn_text": "#000000", "watch_btn_disabled_bg": "#000000", "watch_btn_disabled_text": "#000000", "watch_btn_label": "", "watch_btn_disabled_label": "", "watch_info_btn_bg": "#000000", "watch_info_btn_hover": "#000000", "watch_info_btn_text": "#000000", "watch_info_btn_label": "", "watch_server_active_bg": "#000000", "watch_server_text": "#000000"}; 

        // NAME FIXES DICTIONARY (From Testing Index)
        const NAME_FIXES = {
            "icehockey": "Ice Hockey", "fieldhockey": "Field Hockey",
            "tabletennis": "Table Tennis", "americanfootball": "American Football",
            "australianfootball": "AFL", "basketball": "Basketball",
            "football": "Football", "soccer": "Soccer", "baseball": "Baseball",
            "fighting": "Fighting", "mma": "MMA", "boxing": "Boxing",
            "motorsport": "Motorsport", "golf": "Golf"
        };

        let allMatches = [];
        let groupedMatchesCache = []; 
        let scrollTimeout;

        // ==========================================
        // 2. INITIALIZATION
        // ==========================================
        window.addEventListener('DOMContentLoaded', () => {
            highlightActiveMenu();
            setTimeout(renderSocials, 3000); // Defer non-critical JS
            loadMatches();
        });

        window.addEventListener('scroll', () => {
            const btn = document.getElementById('backToTop');
            if(window.scrollY > 300) {
                btn.classList.add('show');
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => { btn.classList.remove('show'); }, 2000); 
            } else {
                btn.classList.remove('show');
            }
        });

        async function loadMatches() {
            try {
                if(!API_URL || API_URL.includes("{{")) return;
                
                const res = await fetch(`${API_URL}?country=${TARGET_COUNTRY.toLowerCase()}`);
                if (!res.ok) return;
                const data = await res.json();
                
                // Fast Data Normalization
                allMatches = [];
                const len = data.matches.length;
                for(let i=0; i<len; i++) {
                    const m = data.matches[i];
                    // Skip invalid matches
                    if((m.home_team === 'TBA' || !m.home_team) && (m.away_team === 'TBA' || !m.away_team)) continue;
                    // Timestamp fix
                    if (!m.startTimeUnix && m.timestamp) m.startTimeUnix = new Date(m.timestamp).getTime();
                    allMatches.push(m);
                }

                const processed = processMatches(allMatches);
                renderApp(processed);

            } catch(e) { console.error(e); }
        }

        // ==========================================
        // 3. LOGIC UPDATES (STRICT CHECK & NAMING)
        // ==========================================

        function slugify(text) { return (text || "").toString().toLowerCase().replace(/[^\w\s-]/g, '').replace(/\s+/g, '-').replace(/^-+|-+$/g, ''); }
        
        function unslugify(slug) { return slug.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '); }

        function resolveLeagueData(match) {
            const hRaw = match.home_team || "";
            const hSlug = slugify(hRaw);
            const aSlug = slugify(match.away_team);

            // 1. Strict Map Check (Both Teams must match the league)
            if (TEAM_TO_LEAGUE && TEAM_TO_LEAGUE[hSlug] && TEAM_TO_LEAGUE[aSlug] && TEAM_TO_LEAGUE[hSlug] === TEAM_TO_LEAGUE[aSlug]) {
                return { name: TEAM_TO_LEAGUE[hSlug], source: "Map" };
            }
            // 2. Map Fallback (Home Team only)
            if (TEAM_TO_LEAGUE && TEAM_TO_LEAGUE[hSlug]) {
                 return { name: TEAM_TO_LEAGUE[hSlug], source: "MapHome" };
            }

            // 3. Prefix Rule (The (:) logic)
            // If home team is like "NFL: Patriots", use "NFL"
            if (hRaw.includes(':')) {
                const parts = hRaw.split(':');
                const candidate = parts[0].trim();
                // Basic validation to ensure it's a league/sport name
                if (candidate.length > 1 && candidate.length < 25) {
                    return { name: candidate, source: "Split" };
                }
            }

            // 4. API Fallback with Name Correction
            let apiName = (match.league || match.sport || "Other").trim();
            const lowerApi = apiName.toLowerCase().replace(/\s/g, '');
            // Fix "ICEHOCKEY" -> "Ice Hockey"
            if(NAME_FIXES[lowerApi]) apiName = NAME_FIXES[lowerApi];
            
            return { name: apiName, source: "API" };
        }

        // UPDATE 2: Advanced Name Correction
        function getCleanTeamName(rawName, slug, resolvedLeague) {
            if (!rawName || rawName === "TBA" || slug === "tba") return "TBA";

            // A. Map-Based Reconstruction (Highest Quality)
            if (TEAM_TO_LEAGUE && TEAM_TO_LEAGUE[slug]) {
                return unslugify(slug);
            }

            // B. Text Cleaning (Regex)
            let clean = rawName;
            
            // Remove League Prefix if present (e.g. "Premier League: Man Utd")
            if (resolvedLeague) {
                try {
                    const safeLeague = resolvedLeague.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const regex = new RegExp(`^${safeLeague}:\\s*`, 'i');
                    clean = clean.replace(regex, '');
                } catch(e) {}
            }
            
            // Standard US Sport Prefix Removal
            clean = clean.replace(/^(NHL|NBA|NFL|MLB|UFC):\s*/i, '').trim();

            return clean;
        }

        function calculateScore(m, leagueName) {
            let score = 0;
            // 1. CHECK BOOST LIST (New Logic)
    const boostList = (PRIORITIES._BOOST || "").toLowerCase().split(',').map(s=>s.trim()).filter(Boolean);
    const leagueLow = (leagueName || "").toLowerCase();
    const sportLow = (m.sport || "").toLowerCase();

    // If matches Boost text, give huge bonus so it tops Schema & List
    if (boostList.some(k => leagueLow.includes(k) || sportLow.includes(k))) {
        score += 2000; 
    }
            // Admin Priorities Score
            if (PRIORITIES[leagueName]) score += PRIORITIES[leagueName].score * 10;
            else if(PRIORITIES[m.sport || "General"]) score += PRIORITIES[m.sport || "General"].score; 
            
            // Live Boost
            if (m.is_live) { 
                score += 5000; 
                score += (m.live_viewers || 0); 
            } else {
                // Time Proximity Boost (Closer = Higher)
                const hoursUntil = (m.startTimeUnix - Date.now()) / 3600000;
                if (hoursUntil < 24) score += (24 - hoursUntil);
            }
            return score;
        }

        function processMatches(matches) {
            return matches.map(m => {
                const homeSlug = slugify(m.home_team);
                const awaySlug = slugify(m.away_team);
                const resolved = resolveLeagueData(m);
                
                // Pass resolved league to name cleaner for better prefix removal
                const cleanHome = getCleanTeamName(m.home_team, homeSlug, resolved.name);
                const cleanAway = getCleanTeamName(m.away_team, awaySlug, resolved.name);

                return {
                    ...m,
                    finalLeague: resolved.name,
                    displayHome: escapeHtml(cleanHome), 
                    displayAway: escapeHtml(cleanAway),
                    priorityScore: calculateScore(m, resolved.name)
                };
            });
        }

        // ==========================================
        // 4. RENDERING (Lazy Load & LCP Optimized)
        // ==========================================
        function renderApp(matches) {
            const now = Date.now();
            const oneDay = 86400000; 

            matches.sort((a,b) => b.priorityScore - a.priorityScore);

            const liveMatches = [];
            const upcomingMatches = [];
            const wildcardMatches = [];
            const top5Matches = [];
            const claimedIds = new Set();

            const isWildcardActive = WILDCARD_CATEGORY && WILDCARD_CATEGORY.length > 2;
            const wcLower = isWildcardActive ? WILDCARD_CATEGORY.toLowerCase() : "";

            // 1. Separation
            for (const m of matches) {
                if (m.is_live) liveMatches.push(m);
                else upcomingMatches.push(m);
            }

            // 2. Wildcard Bucket
            if (isWildcardActive) {
                for (const m of upcomingMatches) {
                    if (m.finalLeague.toLowerCase().includes(wcLower) || (m.sport||"").toLowerCase().includes(wcLower)) {
                        wildcardMatches.push(m);
                        claimedIds.add(m.id);
                    }
                }
                wildcardMatches.sort((a,b) => a.startTimeUnix - b.startTimeUnix);
            }

            // 3. Top 5 Bucket (With Boost Logic)
            if (!isWildcardActive) {
                // Boost List from Admin
                const boostList = (PRIORITIES._BOOST || "").toLowerCase().split(',').map(s=>s.trim()).filter(Boolean);
                
                // Sort Upcoming: Boosted First, then Time
                const sortedUpcoming = [...upcomingMatches].sort((a,b) => {
                    const aBoost = boostList.some(k => a.finalLeague.toLowerCase().includes(k));
                    const bBoost = boostList.some(k => b.finalLeague.toLowerCase().includes(k));
                    if (aBoost && !bBoost) return -1;
                    if (!aBoost && bBoost) return 1;
                    return a.startTimeUnix - b.startTimeUnix;
                });

                let count = 0;
                for (const m of sortedUpcoming) {
                    if (count >= 5) break;
                    if ((m.startTimeUnix - now) < oneDay) {
                        top5Matches.push(m);
                        claimedIds.add(m.id);
                        count++;
                    }
                }
            }

            // 4. Grouped Bucket (Cache for Lazy Load)
            groupedMatchesCache = []; 
            for (const m of upcomingMatches) {
                if (!claimedIds.has(m.id) && (m.startTimeUnix - now) < oneDay) {
                    groupedMatchesCache.push(m);
                }
            }

            // 5. RENDER CRITICAL (Sync for LCP)
            document.getElementById('live-sk-head').style.display = 'none';
            document.getElementById('live-skeleton').style.display = 'none';
            document.getElementById('upcoming-skeleton').style.display = 'none';

            renderLiveSection(liveMatches);

            if (isWildcardActive && wildcardMatches.length > 0) {
                 let wcTitle = "Section title test Single league";
                 if (!wcTitle) wcTitle = `Hey ${WILDCARD_CATEGORY}`.trim();
                 const wcContainer = document.getElementById('wildcard-container');
                 wcContainer.innerHTML = '';
                 createSection(wcContainer, wcTitle, wildcardMatches, false, false, null, WILDCARD_CATEGORY, true);
            } else if (!isWildcardActive) {
                const topContainer = document.getElementById('top-upcoming-container');
                if(top5Matches.length > 0) {
                    const topTitle = "Top 5 section title test" || "Top Matches in Next 24h";
                    createSection(topContainer, topTitle, top5Matches, false, false, "üî•", null, true);
                } else {
                    topContainer.innerHTML = '<div style="padding:15px;color:var(--text-muted);text-align:center;">No upcoming matches in next 24h.</div>';
                }
            }
            
            generateDynamicSchema(liveMatches, upcomingMatches);

            // 6. SETUP LAZY LOAD (Fix TBT)
            if(groupedMatchesCache.length > 0) {
                setupLazyLoading();
            }
        }

        function setupLazyLoading() {
            const container = document.getElementById('grouped-container');
            const trigger = document.createElement('div');
            trigger.id = 'lazy-trigger';
            trigger.style.height = '10px'; trigger.style.marginBottom = '20px';
            container.parentNode.insertBefore(trigger, container);

            const observer = new IntersectionObserver((entries) => {
                if(entries[0].isIntersecting) {
                    observer.disconnect(); trigger.remove();
                    setTimeout(() => renderGroupedSections(groupedMatchesCache), 0);
                }
            }, { rootMargin: "200px" });

            observer.observe(trigger);
        }

        function renderGroupedSections(matches) {
            if(!matches || matches.length === 0) return;
            const container = document.getElementById('grouped-container');
            container.innerHTML = '';
            container.style.contentVisibility = 'auto'; 
            container.style.containIntrinsicSize = '1000px';

            const boostList = (PRIORITIES._BOOST || "").toLowerCase().split(',').map(s=>s.trim()).filter(Boolean);
            const HIDE_OTHERS = PRIORITIES._HIDE_OTHERS === true;

            const buckets = { boost: {}, leagues: {}, generic: {}, other: [] };

            Object.keys(PRIORITIES).forEach(key => {
                if(key.startsWith('_')) return;
                const conf = PRIORITIES[key];
                if(conf.isHidden) return;
                if(conf.isLeague) buckets.leagues[key] = [];
                else buckets.generic[key] = [];
            });

            for (const m of matches) {
                const leagueName = m.finalLeague;
                const leagueLower = leagueName.toLowerCase();
                const sport = m.sport || "General";
                
                if (boostList.some(b => leagueLower.includes(b))) {
                    if (!buckets.boost[leagueName]) buckets.boost[leagueName] = [];
                    buckets.boost[leagueName].push(m);
                    continue;
                }
                
                let placed = false;
                for (const pKey of Object.keys(buckets.leagues)) {
                    if (leagueLower.includes(pKey.toLowerCase())) {
                        buckets.leagues[pKey].push(m);
                        placed = true;
                        break;
                    }
                }
                if(placed) continue;
                for (const pKey of Object.keys(buckets.generic)) {
                    if (leagueLower.includes(pKey.toLowerCase()) || sport.toLowerCase().includes(pKey.toLowerCase())) {
                        buckets.generic[pKey].push(m);
                        placed = true;
                        break;
                    }
                }
                if(placed) continue;
                if(!HIDE_OTHERS) buckets.other.push(m);
            }

            const frag = document.createDocumentFragment();
            
            Object.keys(buckets.boost).forEach(key => { if(buckets.boost[key].length) createSection(frag, key, buckets.boost[key], true, true, null, key); });
            const sortedLeagues = Object.keys(buckets.leagues).sort((a,b) => PRIORITIES[b].score - PRIORITIES[a].score);
            sortedLeagues.forEach(key => { if(buckets.leagues[key].length) createSection(frag, key, buckets.leagues[key], true, true, null, key); });
            const sortedSports = Object.keys(buckets.generic).sort((a,b) => PRIORITIES[b].score - PRIORITIES[a].score);
            sortedSports.forEach(key => { if(buckets.generic[key].length) createSection(frag, key, buckets.generic[key], false, false, null, key); });
            if(buckets.other.length) createSection(frag, "Upcoming Other Matches", buckets.other, false, false, null, null);
            
            container.appendChild(frag);
        }

        // ==========================================
        // 5. UI COMPONENTS
        // ==========================================
        function renderLiveSection(matches) {
            const wrapper = document.getElementById('live-content-wrapper');
            const topList = document.getElementById('trending-list');
            const hiddenList = document.getElementById('hidden-live-list');
            const btn = document.getElementById('show-more-live');
            
            let displayMatches = matches;
            if (WILDCARD_CATEGORY && WILDCARD_CATEGORY.length > 2) {
                const wLower = WILDCARD_CATEGORY.toLowerCase();
                const wc = [], other = [];
                matches.forEach(m => (m.finalLeague.toLowerCase().includes(wLower) || (m.sport||"").toLowerCase().includes(wLower)) ? wc.push(m) : other.push(m));
                displayMatches = [...wc, ...other];
            }

            if (displayMatches.length === 0) { 
                wrapper.style.display = 'none'; 
                document.getElementById('live-section').style.display = 'none';
                return; 
            }
            
            wrapper.style.display = 'block';
            topList.innerHTML = ''; hiddenList.innerHTML = ''; btn.style.display='none';
            document.getElementById('live-count').innerText = `‚óè ${displayMatches.length} Live Events`;
            
            const fragTop = document.createDocumentFragment();
            displayMatches.slice(0, 5).forEach(m => fragTop.appendChild(createMatchRow(m, { isLive: true }, null)));
            topList.appendChild(fragTop);
            
            if (displayMatches.length > 5) {
                const fragHidden = document.createDocumentFragment();
                displayMatches.slice(5).forEach(m => fragHidden.appendChild(createMatchRow(m, { isLive: true }, null)));
                hiddenList.appendChild(fragHidden);
                
                btn.style.display = 'block'; 
                btn.innerText = `View more (${displayMatches.length - 5}) ‚ñº`;
                btn.onclick = () => { hiddenList.style.display='block'; btn.style.display='none'; };
            }
        }

        function createSection(container, title, matches, hasLink, isLeague, customIcon, sectionTitle, skipPrefix=false) {
            if(!matches || matches.length === 0) return;
            const section = document.createElement('div');
            section.className = 'section-box'; 
            section.style.marginBottom = '30px';
            
            let linkHtml = '';
            if (!skipPrefix && PRIORITIES[title] && PRIORITIES[title].hasLink) {
                linkHtml = `<a href="/${normalizeKey(title)}-streams/" class="sec-right-link">Show More ></a>`;
            }

            let iconHtml = customIcon ? `<span style="font-size:1.2rem; margin-right:8px;">${customIcon}</span>` : '';
            if (IMAGE_MAP.leagues && IMAGE_MAP.leagues[title]) {
                iconHtml = `<img src="${IMAGE_MAP.leagues[title]}" class="sec-logo" alt="${title}" loading="lazy" width="24" height="24">`;
            } else if (!customIcon) {
                iconHtml = `<span style="font-size:1.2rem; margin-right:8px;">${getSportIcon(title)}</span>`;
            }

            let displayTitle = title;
            const prefix = "Hey".trim();
            if (!skipPrefix && prefix) displayTitle = `${prefix} ${title}`;

            section.innerHTML = `<div class="sec-head"><h2 class="sec-title">${iconHtml} ${displayTitle}</h2>${linkHtml}</div>`;
            const list = document.createElement('div');
            matches.forEach(m => list.appendChild(createMatchRow(m, { isLive: false }, sectionTitle)));
            section.appendChild(list);
            container.appendChild(section);
        }

        function createMatchRow(m, context, sectionTitle) {
            const div = document.createElement('div');
            div.className = m.is_live ? 'match-row live' : 'match-row';
            
            let timeCol;
            if (m.is_live) {
                timeCol = `<span class="live-txt">LIVE</span><span class="time-sub">${m.status_text || "Now"}</span>`;
            } else { 
                const ft = formatMatchTime(m.startTimeUnix);
                timeCol = `<span class="time-main">${ft.time}</span><span class="time-sub">${ft.date}</span>`; 
            }
            
            const getLogo = (name) => {
                if (IMAGE_MAP.teams && IMAGE_MAP.teams[name]) {
                    const p = IMAGE_MAP.teams[name];
                    const full = p.startsWith('/') ? p : '/' + p;
                    return `<div class="logo-box"><img src="${full}" class="t-img" alt="${name}" loading="lazy" width="20" height="20"></div>`;
                }
                const c = ['#e53935','#d81b60','#8e24aa','#5e35b1','#3949ab','#1e88e5','#039be5','#00897b','#43a047','#7cb342','#c0ca33','#fdd835','#fb8c00'][(name.charCodeAt(0)||0)%13];
                return `<div class="logo-box"><span class="t-logo" style="background:${c}">${name.charAt(0)}</span></div>`;
            };
            
            let teamsHtml = '';
            const isSingle = (m.displayAway === 'TBA');
            
            if (isSingle) {
                teamsHtml = `<div class="team-name">${getLogo(m.displayHome)} ${m.displayHome}</div>`;
            } else {
                teamsHtml += `<div class="team-name">${getLogo(m.displayHome)} ${m.displayHome}</div>`;
                teamsHtml += `<div class="team-name">${getLogo(m.displayAway)} ${m.displayAway}</div>`;
            }
            
            let tagText = m.finalLeague;
            // If we are inside a specific section (e.g., "Premier League"), show Sport ("Soccer") instead of repeating "Premier League"
            // Also handles fuzzy matching (e.g. Section "NBA" vs Match "NBA Preseason")
            if (sectionTitle) {
                const sLow = sectionTitle.toLowerCase();
                const mLow = m.finalLeague.toLowerCase();
                if (mLow === sLow || mLow.includes(sLow)) {
                    let rawSport = (m.sport || "General").trim();
        let sportKey = rawSport.toLowerCase().replace(/\s/g, '');
        tagText = NAME_FIXES[sportKey] ? NAME_FIXES[sportKey] : rawSport;
                }
            }
            
            let metaHtml = '';
            if (m.is_live) {
                const v = m.live_viewers || 0;
                let vText = v > 5000 ? `üëÄ ${(v/1000).toFixed(1)}k üî•` : (v >= 1000 ? `üëÄ ${(v/1000).toFixed(1)}k üìà` : "‚ö° Stable");
                metaHtml = `<div class="meta-top">${vText}</div>`;
            } else {
                 metaHtml = `<div style="display:flex; flex-direction:column; align-items:flex-end;"><span style="font-size:0.55rem; color:var(--text-muted); font-weight:700; text-transform:uppercase; margin-bottom:2px;">Starts in</span><span class="meta-top" style="color:var(--accent-gold); font-size:0.75rem;">${m.status_text}</span></div>`;
            }

            let actionHtml = '';
            const copyBtn = `<button class="btn-copy-link" onclick="copyText('${SITE_DOMAIN}/watch/?${PARAM_INFO}=${m.id}')"><svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg> Link</button>`;

            if (m.is_live) {
                const liveLink = `${SITE_DOMAIN}/watch/?${PARAM_LIVE}=${m.id}`;
                actionHtml = `<button onclick="window.location.href='${liveLink}'" class="btn-watch" title="Watch ${m.displayHome}">Streams <span class="hd-badge">SD</span></button>`;
} else {
                const start = m.startTimeUnix || Date.now();
                if ((start - Date.now()) / 60000 <= 30) actionHtml = `<button onclick="openMatch('${m.id}', 'info')" class="btn-watch">Streams <span class="hd-badge">SD</span></button>` + copyBtn;
                else actionHtml = `<button onclick="setNotify(this)" class="btn-notify">üîî Notify</button>` + copyBtn;
            }
            
            div.innerHTML = `<div class="col-time">${timeCol}</div><div class="teams-wrapper"><div class="league-tag">${tagText.toUpperCase()}</div>${teamsHtml}</div><div class="col-meta">${metaHtml}</div><div class="col-action">${actionHtml}</div>`;
            return div;
        }

        // ==========================================
        // 6. UTILS
        // ==========================================
        function formatMatchTime(unix) {
            if (!unix || isNaN(unix)) return { time: "--:--", date: "Unknown" };
            const isUK = (typeof TARGET_COUNTRY !== 'undefined' && TARGET_COUNTRY === 'UK');
            const timeZone = isUK ? 'Europe/London' : 'America/New_York';
            const suffix = isUK ? ' GMT' : ' ET';
            try {
                const d = new Date(unix);
                const t = new Intl.DateTimeFormat('en-US', {hour: 'numeric', minute: '2-digit', hour12: true, timeZone}).format(d);
                const dt = new Intl.DateTimeFormat('en-US', {month: 'short', day: 'numeric', timeZone}).format(d);
                return { time: t + suffix, date: dt };
            } catch (e) { return { time: "--:--", date: "Invalid" }; }
        }
        function escapeHtml(text) { if (!text) return text; return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;"); }
        function normalizeKey(str) { return str ? str.toLowerCase().replace(/[^a-z0-9]/g, '') : ""; }
        function openMatch(matchId, type) { 
    // Uses 'stream' param for live, 'info' param for upcoming/30min
    const param = (type === 'live') ? PARAM_LIVE : PARAM_INFO;
    window.location.href = `${SITE_DOMAIN}/watch/?${param}=${matchId}`; 
}
        function copyText(text) { navigator.clipboard.writeText(text); const t = document.createElement('div'); t.className = 'copy-toast'; t.innerText = 'Link copied ‚úì'; document.body.appendChild(t); setTimeout(() => t.remove(), 1600); }
        function highlightActiveMenu() { const path = window.location.pathname; document.querySelectorAll('.nav-links a, .mobile-menu a').forEach(link => { if(link.getAttribute('href') === path) link.classList.add('active'); }); }
        function toggleMenu() { document.getElementById('mobileMenu').classList.toggle('active'); }
        function setNotify(btn) { btn.classList.add('active'); btn.innerHTML = '‚úì Set'; btn.disabled = true; }
        function renderSocials() {
            const currentSlug = window.location.pathname.replace(/\//g, '');
            if(SHARE_CONFIG.excluded.includes(currentSlug)) return;
            const makeUrl = (p) => {
                const u = encodeURIComponent(SITE_DOMAIN);
                if(p==='telegram') return `https://t.me/share/url?url=${u}`;
                if(p==='whatsapp') return `https://api.whatsapp.com/send?text=${u}`;
                if(p==='reddit') return `https://www.reddit.com/submit?url=${u}`;
                if(p==='twitter') return `https://twitter.com/intent/tweet?url=${u}`;
                return null;
            };
            const icons = { telegram: '<svg viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.47-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.28L19.84 4c.75-.28 1.4.52 1.16 1.76l-2.8 13.2c-.2.9-1.09.9-1.8.6l-5.45-4.06-2.6 2.5c-.3.3-.55.55-1.1.55l.45-3.6z"/></svg>', whatsapp: '<svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91c0 1.75.46 3.46 1.33 4.97L2 22l5.25-1.38a9.86 9.86 0 004.79 1.22h.01c5.46 0 9.91-4.45 9.91-9.91C21.96 6.45 17.51 2 12.04 2zm4.43-6.03c-.24-.12-1.41-.7-1.63-.78-.22-.08-.38-.12-.54.12-.16.24-.62.78-.76.94-.14.16-.28.18-.52.06-.24-.12-1.02-.38-1.94-1.2-.72-.64-1.2-1.44-1.34-1.68-.14-.24-.01-.37.11-.49.11-.11.24-.28.36-.42.12-.14.16-.24.24-.4.08-.16.04-.3-.02-.42-.06-.12-.54-1.3-.74-1.78-.2-.48-.4-.42-.54-.42h-.46c-.16 0-.42.06-.64.3C4.33 8.6 3.5 9.2 3.5 10.38c0 1.18.86 2.32.98 2.48.12.16 1.7 2.6 4.12 3.65.58.25 1.03.4 1.38.51.58.18 1.1.15 1.52.09.46-.07 1.41-.58 1.61-1.14.2-.56.2-1.04.14-1.14-.06-.1-.22-.16-.46-.28z"/></svg>', reddit: '<svg viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.22 14.11c-.13.26-.35.45-.6.54-.25.09-.52.1-.78.01-.8-.28-1.76-.43-2.77-.43s-1.97.15-2.77.43c-.26.09-.53.08-.78-.01-.25-.09-.47-.28-.6-.54-.15-.3-.19-.64-.11-.96.08-.32.28-.59.56-.75.9-.53 2.05-.83 3.28-.88l.66-3.11 2.16.46c.04-.2.15-.38.31-.51s.36-.2.55-.17c.2.03.38.15.51.31.13.16.2.36.17.55l-2.16-.46-.66 3.11c1.23.05 2.38.35 3.28.88.28.16.48.43.56.75.08.32.04.66-.11.96zM12 11.25c-.97 0-1.75.78-1.75 1.75s.78 1.75 1.75 1.75 1.75-.78 1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75-.78-1.75-1.75-1.75zm-3.25-2.5c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25-.56 1.25-1.25 1.25-1.25-.56-1.25-1.25zm6.5 0c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25-.56 1.25-1.25 1.25-1.25-.56-1.25-1.25z"/></svg>', twitter: '<svg viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/></svg>', copy: '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>' };
            let html = '';
            ['telegram', 'whatsapp', 'reddit', 'twitter', 'copy'].forEach(p => {
                const count = SHARE_CONFIG.counts[p] ? ((n)=>(n>=1000?(n/1000).toFixed(1)+'k':n))(SHARE_CONFIG.counts[p]) : '';
                const onclick = p === 'copy' ? `copyText('${SITE_DOMAIN}')` : `window.open('${makeUrl(p)}', '_blank')`;
                html += `<div class="social-btn ${p}" onclick="${onclick}">${icons[p]}<span class="s-count">${count}</span></div>`;
            });
            if(document.getElementById('socialSidebar')) document.getElementById('socialSidebar').innerHTML = html;
            if(document.getElementById('mobileFooter')) document.getElementById('mobileFooter').innerHTML = html;
        }
        function getSportIcon(n) { n=(n||"").toLowerCase(); if(n.includes('soccer')||n.includes('premier')) return '‚öΩ'; if(n.includes('basket')||n.includes('nba')) return 'üèÄ'; if(n.includes('football')||n.includes('nfl')) return 'üèà'; if(n.includes('baseball')||n.includes('mlb')) return '‚öæ'; if(n.includes('fight')||n.includes('ufc')||n.includes('box')||n.includes('mma')) return 'ü•ä'; if(n.includes('motor')||n.includes('f1')) return 'üèéÔ∏è'; return 'üèÜ'; }
        
        function generateDynamicSchema(liveList, upcomingList) {
            const now = Date.now();
            const existing = document.getElementById('dynamic-schema-script');
            if (existing) existing.remove();
            
            // Limit to top 20 events for SEO performance
            const allItems = [...liveList, ...upcomingList].slice(0, 20);
            if (allItems.length === 0) return;

            const mainImage = (document.querySelector('meta[property="og:image"]') || {}).content || `${SITE_DOMAIN}/assets/logo.png`;
            
            // LOGIC: Define Individual Sports (Person) vs Team Sports
            const INDIVIDUAL_SPORTS = ['ufc', 'mma', 'boxing', 'tennis', 'golf', 'f1', 'motorsport', 'fighting', 'wwe', 'aew'];

            const listItems = allItems.map((m, index) => {
                const isLive = m.is_live;
                
                // 1. Detect Type (Person vs SportsTeam)
                const leagueLower = (m.finalLeague || "").toLowerCase();
                const isIndividual = INDIVIDUAL_SPORTS.some(s => leagueLower.includes(s));
                const entityType = isIndividual ? "Person" : "SportsTeam";

                // 2. Detect Single vs Double (Check TBA)
                const isDouble = (m.displayAway && m.displayAway !== 'TBA');

                // 3. Detect Logos (Rule: Only use if BOTH are present)
                let hLogo = null, aLogo = null;
                if (IMAGE_MAP.teams) {
                    const hL = IMAGE_MAP.teams[m.displayHome];
                    const aL = IMAGE_MAP.teams[m.displayAway];
                    // Only apply if both exist and are valid URLs
                    if (hL && aL) {
                        hLogo = hL.startsWith('http') ? hL : SITE_DOMAIN + (hL.startsWith('/')?'':'/') + hL;
                        aLogo = aL.startsWith('http') ? aL : SITE_DOMAIN + (aL.startsWith('/')?'':'/') + aL;
                    }
                }

                // 4. Construct Entities
                const homeEntity = { "@type": entityType, "name": m.displayHome };
                if (hLogo) homeEntity.image = hLogo;

                const eventName = isDouble ? `${m.displayHome} vs ${m.displayAway}` : m.displayHome;

                // 5. Build Event Schema
                const schemaUrl = `${SITE_DOMAIN}/watch/?${PARAM_INFO}=${m.id}`;
                const schemaItem = {
                    "@type": "SportsEvent",
                    "startDate": new Date(m.startTimeUnix).toISOString(),
                    "eventStatus": isLive ? "https://schema.org/EventLive" : "https://schema.org/EventScheduled",
                    "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
                    "url": schemaUrl,
                    "image": [ mainImage ], // Main event image (fallback to site logo)
                    "name": eventName,
                    "description": `Watch ${eventName} live stream. ${m.finalLeague}.`,
                    "organizer": { "@id": `${SITE_DOMAIN}/#organization` },
                    "offers": { 
                        "@type": "Offer", 
                        "price": "0", 
                        "priceCurrency": "USD", 
                        "availability": isLive ? "https://schema.org/InStock" : "https://schema.org/PreOrder", 
                        "url": schemaUrl 
                    },
                    "homeTeam": homeEntity
                };

                // Add Away Team only if Double Match
                if (isDouble) {
                    const awayEntity = { "@type": entityType, "name": m.displayAway };
                    if (aLogo) awayEntity.image = aLogo;
                    schemaItem.awayTeam = awayEntity;
                }

                // Add Sport specification
                if (m.finalLeague) {
                    schemaItem.sport = m.finalLeague;
                }

                return { "@type": "ListItem", "position": index + 1, "item": schemaItem };
            });

            const schema = { 
                "@context": "https://schema.org", 
                "@type": "ItemList", 
                "@id": `${SITE_DOMAIN}/#matchlist`, 
                "itemListElement": listItems 
            };
            
            const script = document.createElement('script'); 
            script.id = 'dynamic-schema-script'; 
            script.type = 'application/ld+json'; 
            script.textContent = JSON.stringify(schema); 
            document.head.appendChild(script);
        }
    </script>
</body>
</html>
